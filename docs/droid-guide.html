<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DROID 使い方ガイド</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        header p {
            opacity: 0.8;
            font-size: 1.1em;
        }
        .content {
            padding: 40px;
        }
        section {
            margin-bottom: 40px;
        }
        h2 {
            color: #1a1a2e;
            border-left: 4px solid #667eea;
            padding-left: 15px;
            margin-bottom: 20px;
            font-size: 1.5em;
        }
        h3 {
            color: #444;
            margin: 20px 0 10px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }
        tr:hover {
            background: #f8f9ff;
        }
        tr:last-child td {
            border-bottom: none;
        }
        code {
            background: #f4f4f4;
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #e83e8c;
        }
        pre {
            background: #1a1a2e;
            color: #a8dadc;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .note-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 5px;
        }
        .warning {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .warning-title {
            font-weight: bold;
            color: #721c24;
            margin-bottom: 5px;
        }
        .tip {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .tip-title {
            font-weight: bold;
            color: #155724;
            margin-bottom: 5px;
        }
        .card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        .card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }
        footer {
            background: #1a1a2e;
            color: white;
            text-align: center;
            padding: 20px;
            opacity: 0.9;
        }
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .toc h3 {
            margin-top: 0;
            color: #667eea;
        }
        .toc ul {
            list-style: none;
            padding-left: 0;
        }
        .toc li {
            padding: 5px 0;
        }
        .toc a {
            color: #333;
            text-decoration: none;
        }
        .toc a:hover {
            color: #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>DROID 使い方ガイド</h1>
            <p>Factory.ai DROID の完全リファレンス</p>
        </header>
        
        <div class="content">
            <nav class="toc">
                <h3>目次</h3>
                <ul>
                    <li><a href="#basic">1. 基本的な使い方</a></li>
                    <li><a href="#parameters">2. コマンドラインパラメータ</a></li>
                    <li><a href="#slash-commands">3. スラッシュコマンド</a></li>
                    <li><a href="#agent-mode">4. AIエージェントとしての使い方</a></li>
                    <li><a href="#prompt-json">5. prompt.json の設定</a></li>
                    <li><a href="#logging">6. ログ出力機能</a></li>
                    <li><a href="#examples">7. 実用例</a></li>
                </ul>
            </nav>

            <section id="basic">
                <h2>1. 基本的な使い方</h2>
                <p>DROIDは対話モードとコマンドモードの2つの方法で使用できます。</p>
                
                <h3>対話モード</h3>
                <pre><code>droid</code></pre>
                <p>インタラクティブに会話しながら作業を進めます。</p>
                
                <h3>コマンドモード</h3>
                <pre><code>droid --prompt "やりたいことを指示"</code></pre>
                <p>単一のタスクを実行して終了します。</p>
            </section>

            <section id="parameters">
                <h2>2. コマンドラインパラメータ</h2>
                <table>
                    <tr>
                        <th>パラメータ</th>
                        <th>説明</th>
                    </tr>
                    <tr>
                        <td><code>--prompt</code></td>
                        <td>DROIDへの指示内容</td>
                    </tr>
                    <tr>
                        <td><code>--model</code></td>
                        <td>使用するAIモデル（例: claude-sonnet-4-20250514）</td>
                    </tr>
                    <tr>
                        <td><code>--working-directory</code></td>
                        <td>作業ディレクトリを指定</td>
                    </tr>
                    <tr>
                        <td><code>--reference-paths</code></td>
                        <td>参照ファイル/フォルダパス</td>
                    </tr>
                    <tr>
                        <td><code>--auto-approve</code></td>
                        <td>ファイル変更を自動承認</td>
                    </tr>
                    <tr>
                        <td><code>--yolo</code></td>
                        <td>高リスク操作も含めすべて自動承認</td>
                    </tr>
                    <tr>
                        <td><code>--yolo-low</code></td>
                        <td>低リスク操作のみ自動承認</td>
                    </tr>
                    <tr>
                        <td><code>--yolo-medium</code></td>
                        <td>中リスク以下の操作を自動承認</td>
                    </tr>
                    <tr>
                        <td><code>--print</code></td>
                        <td>結果を標準出力に表示</td>
                    </tr>
                    <tr>
                        <td><code>--output-file</code></td>
                        <td>結果をファイルに出力</td>
                    </tr>
                    <tr>
                        <td><code>--no-git-context</code></td>
                        <td>gitコンテキストを無効化</td>
                    </tr>
                    <tr>
                        <td><code>--context-limit</code></td>
                        <td>コンテキストトークン制限</td>
                    </tr>
                    <tr>
                        <td><code>--droid</code></td>
                        <td>カスタムドロイド設定を使用</td>
                    </tr>
                    <tr>
                        <td><code>--task</code></td>
                        <td>事前定義タスクを実行</td>
                    </tr>
                    <tr>
                        <td><code>--mcp-server</code></td>
                        <td>MCPサーバーを追加</td>
                    </tr>
                    <tr>
                        <td><code>--spec</code></td>
                        <td>仕様モードで実行（計画立案のみ）</td>
                    </tr>
                </table>
            </section>

            <section id="slash-commands">
                <h2>3. スラッシュコマンド（対話モード用）</h2>
                <p>対話モードで <code>/</code> を入力すると使用できるコマンドです。</p>
                
                <table>
                    <tr>
                        <th>コマンド</th>
                        <th>説明</th>
                    </tr>
                    <tr>
                        <td><code>/help</code></td>
                        <td>ヘルプを表示</td>
                    </tr>
                    <tr>
                        <td><code>/clear</code></td>
                        <td>会話履歴をクリア</td>
                    </tr>
                    <tr>
                        <td><code>/compact</code></td>
                        <td>会話を要約してコンテキストを圧縮</td>
                    </tr>
                    <tr>
                        <td><code>/status</code></td>
                        <td>現在のセッション状態を表示</td>
                    </tr>
                    <tr>
                        <td><code>/model</code></td>
                        <td>使用するAIモデルを変更</td>
                    </tr>
                    <tr>
                        <td><code>/mcp</code></td>
                        <td>MCPサーバーの管理</td>
                    </tr>
                    <tr>
                        <td><code>/memory</code></td>
                        <td>メモリ（記憶）の管理</td>
                    </tr>
                    <tr>
                        <td><code>/config</code></td>
                        <td>設定の表示・変更</td>
                    </tr>
                    <tr>
                        <td><code>/permissions</code></td>
                        <td>権限設定の管理</td>
                    </tr>
                    <tr>
                        <td><code>/diff</code></td>
                        <td>変更差分を表示</td>
                    </tr>
                    <tr>
                        <td><code>/undo</code></td>
                        <td>直前の変更を取り消し</td>
                    </tr>
                    <tr>
                        <td><code>/hooks</code></td>
                        <td>フックの管理</td>
                    </tr>
                    <tr>
                        <td><code>/pr-comments</code></td>
                        <td>PRコメントの取得</td>
                    </tr>
                    <tr>
                        <td><code>/init</code></td>
                        <td>プロジェクト初期化</td>
                    </tr>
                    <tr>
                        <td><code>/review</code></td>
                        <td>コードレビュー</td>
                    </tr>
                    <tr>
                        <td><code>/bug</code></td>
                        <td>バグレポートを送信</td>
                    </tr>
                    <tr>
                        <td><code>/login</code></td>
                        <td>ログイン</td>
                    </tr>
                    <tr>
                        <td><code>/logout</code></td>
                        <td>ログアウト</td>
                    </tr>
                    <tr>
                        <td><code>/quit</code> / <code>/exit</code></td>
                        <td>DROIDを終了</td>
                    </tr>
                </table>
            </section>

            <section id="agent-mode">
                <h2>4. AIエージェントとしての使い方</h2>
                <p>DROIDは自律的にタスクを実行するAIエージェントとして使用できます。</p>

                <div class="card">
                    <h4>自動承認モード（--yolo系オプション）</h4>
                    <pre><code>droid --prompt "このプロジェクトをリファクタリングして" --yolo</code></pre>
                    <p>ファイル作成・編集・削除を確認なしで自動実行します。</p>
                </div>

                <div class="card">
                    <h4>複雑なタスクの自律実行</h4>
                    <p>DROIDは自動的に以下を行います：</p>
                    <ul>
                        <li>タスクを分解してTodoリストを作成</li>
                        <li>必要なファイルを検索・読み取り</li>
                        <li>コードを生成・編集</li>
                        <li>テスト実行・エラー修正</li>
                        <li>完了まで繰り返し</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>MCPサーバー連携</h4>
                    <pre><code>droid --mcp-server "npx @anthropic/mcp-server-xxx"</code></pre>
                    <p>外部ツール（ブラウザ、DB、API等）と連携して機能を拡張できます。</p>
                </div>

                <div class="card">
                    <h4>カスタムドロイド</h4>
                    <p><code>.factory/droids/</code>に専用の設定ファイルを作成し、特定タスク向けエージェントを定義できます。</p>
                </div>

                <div class="card">
                    <h4>Spec（仕様）モード</h4>
                    <pre><code>droid --prompt "新機能を設計して" --spec</code></pre>
                    <p>まず計画を立て、承認後に実装を開始します。</p>
                </div>

                <div class="warning">
                    <div class="warning-title">注意</div>
                    <code>--yolo</code>は強力ですが、予期しない変更が発生する可能性があります。Gitリポジトリで使用し、変更をレビューすることをお勧めします。
                </div>
            </section>

            <section id="prompt-json">
                <h2>5. prompt.json の設定</h2>
                <p>PowerShellスクリプト用の設定ファイルです。</p>

                <table>
                    <tr>
                        <th>プロパティ</th>
                        <th>説明</th>
                        <th>例</th>
                    </tr>
                    <tr>
                        <td><code>prompt</code></td>
                        <td>DROIDへの指示内容</td>
                        <td><code>"このコードをレビューして"</code></td>
                    </tr>
                    <tr>
                        <td><code>options.working_directory</code></td>
                        <td>作業ディレクトリ</td>
                        <td><code>"."</code> または <code>"C:/projects/myapp"</code></td>
                    </tr>
                    <tr>
                        <td><code>options.reference_paths</code></td>
                        <td>参照ファイル/フォルダ</td>
                        <td><code>["src/main.py", "docs/"]</code></td>
                    </tr>
                    <tr>
                        <td><code>options.model</code></td>
                        <td>AIモデル</td>
                        <td><code>"claude-sonnet-4-20250514"</code></td>
                    </tr>
                    <tr>
                        <td><code>options.auto_approve</code></td>
                        <td>自動承認</td>
                        <td><code>true</code> または <code>false</code></td>
                    </tr>
                    <tr>
                        <td><code>options.log_directory</code></td>
                        <td>ログ出力先ディレクトリ</td>
                        <td><code>"logs"</code> または <code>"C:/logs/droid"</code></td>
                    </tr>
                </table>

                <h3>完全な例</h3>
                <pre><code>{
    "prompt": "このプロジェクトのコードをレビューして改善点を教えて",
    "options": {
        "working_directory": "C:/projects/myapp",
        "reference_paths": [
            "src/main.py",
            "src/utils/",
            "config.json"
        ],
        "model": "claude-sonnet-4-20250514",
        "auto_approve": false,
        "log_directory": "logs"
    }
}</code></pre>
            </section>

            <section id="logging">
                <h2>7. ログ出力機能</h2>
                <p>実行するたびに<code>logs</code>フォルダ（または<code>log_directory</code>で指定したフォルダ）にログファイルが自動生成されます。</p>

                <h3>ログに含まれる内容</h3>
                <ul>
                    <li>実行日時</li>
                    <li>プロンプト内容</li>
                    <li>作業ディレクトリ</li>
                    <li>使用モデル</li>
                    <li><strong>DROIDの検討過程（思考プロセス）</strong></li>
                    <li>実行結果</li>
                    <li>完了時刻</li>
                </ul>

                <h3>ログファイル名の形式</h3>
                <pre><code>droid_YYYYMMDD_HHMMSS.log</code></pre>
                <p>例: <code>droid_20260110_143052.log</code></p>

                <div class="tip">
                    <div class="tip-title">ヒント</div>
                    <p>ログファイルにはDROIDの検討過程（どのような思考でタスクを進めたか）も記録されるため、後から実行内容を確認したり、デバッグに活用できます。</p>
                </div>
            </section>

            <section id="examples">
                <h2>7. 実用例</h2>

                <div class="card">
                    <h4>ファイル操作</h4>
                    <pre><code>droid --prompt "このフォルダ内のファイル一覧を表示して"</code></pre>
                </div>

                <div class="card">
                    <h4>コード作成</h4>
                    <pre><code>droid --prompt "Pythonで簡単なTODOリストアプリを作成して" --auto-approve</code></pre>
                </div>

                <div class="card">
                    <h4>プロジェクト分析</h4>
                    <pre><code>droid --prompt "このプロジェクトの構造を説明して" --working-directory "C:/path/to/project"</code></pre>
                </div>

                <div class="card">
                    <h4>バグ修正</h4>
                    <pre><code>droid --prompt "main.pyのエラーを修正して" --reference-paths "main.py"</code></pre>
                </div>

                <div class="card">
                    <h4>リファクタリング（自動実行）</h4>
                    <pre><code>droid --prompt "utils.jsのコードを読みやすくリファクタリングして" --yolo</code></pre>
                </div>

                <div class="card">
                    <h4>設計・計画</h4>
                    <pre><code>droid --prompt "ユーザー認証機能を設計して" --spec</code></pre>
                </div>

                <div class="tip">
                    <div class="tip-title">ヒント</div>
                    <p>複雑なタスクは <code>--spec</code> で計画を立ててから実行すると、より正確な結果が得られます。</p>
                </div>
            </section>
        </div>

        <footer>
            <p>Factory.ai DROID Guide | Generated for PowerShell Integration</p>
        </footer>
    </div>
</body>
</html>
