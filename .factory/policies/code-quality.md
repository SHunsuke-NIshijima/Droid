# コード品質ポリシー

## コーディング規約

### PowerShell
- **変数名**: `$camelCase` を使用
- **関数名**: `Verb-Noun` 形式（例: `Get-UserInput`, `Set-Configuration`）
- **スコープ**: 明示的に指定する（`$script:`, `$global:` など）
- **エラーハンドリング**: すべての外部呼び出しに `try-catch` を実装
- **コメント**: 副作用のある処理には必ずコメントを記載

### Python
- **スタイル**: PEP 8 に準拠
- **型ヒント**: 可能な限り使用する
- **ドキュメント**: すべての関数に docstring を記載
- **テスト**: pytest を使用し、カバレッジ 80% 以上を目指す

## ドキュメント

### 必須ドキュメント
- README.md - プロジェクト概要と使用方法
- AGENTS.md - AI エージェント向けガイドライン
- 各スクリプトファイルのヘッダーコメント

### ドキュメント記述ルール
- 言語: 日本語
- 形式: Markdown
- 前提条件と制約事項を明記
- 実行例を含める

## テスト要件

### 単体テスト
- すべての関数に対してテストを作成
- 正常系とエラー系の両方をカバー
- モックを適切に使用する

### 統合テスト
- CLI 実行フローの end-to-end テスト
- 設定ファイルの読み込みと解析テスト
- ログ出力の検証

### テスト実行
```cmd
cd Test
python run_all_tests.py
```

## コードレビュー基準

### 必須チェック項目
- [ ] コーディング規約に準拠しているか
- [ ] エラーハンドリングが適切か
- [ ] テストが追加されているか
- [ ] ドキュメントが更新されているか
- [ ] セキュリティ上の問題がないか

### 推奨チェック項目
- [ ] パフォーマンスへの影響は考慮されているか
- [ ] 可読性と保守性が高いか
- [ ] 既存コードとの一貫性があるか
- [ ] 再利用可能な設計になっているか

## リファクタリング基準

以下の場合、リファクタリングを検討する：
- 関数が 50 行を超える
- ネストが 3 レベルを超える
- 重複コードが 3 箇所以上ある
- 複雑度（cyclomatic complexity）が 10 を超える

## 変更管理

### ブランチ戦略
- `main`: 本番環境相当
- `feature/*`: 機能開発
- `bugfix/*`: バグ修正
- `hotfix/*`: 緊急修正

### コミットメッセージ
```
<種類>: <概要>

<詳細説明>

Co-authored-by: factory-droid[bot] <138933559+factory-droid[bot]@users.noreply.github.com>
```

種類: `feat`, `fix`, `docs`, `test`, `refactor`, `chore`
